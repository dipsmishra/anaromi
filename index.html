<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta name="description" content="Maths - Sum Generator v2">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Maths - Sum Generator v2</title>
  <style>
    #page {
      margin: 0 auto;
      overflow: hidden;
      font-family: monospace, sans-serif;
      font-size: 18pt;
      font-weight: normal;
      font-stretch: normal;
      font-style: normal;
      line-height: 2.5;
      letter-spacing: normal;
      color: #191c5f;
    }
    #content
    {
      padding: 3.84615384615385%;
    }
    .columns
    {
      -moz-column-width: 11.5em;
      -webkit-column-width: 11.5em;
      column-width: 11.5em;
    }
    .columns ul
    {
      margin: 0;
      padding: 0;
      list-style-type: none;
    }
    .columns ul li:first-child
    {
      margin-top:0;
    }
    li {
      display: inline-block;
      width: 100%
    }
    .serial-no {
      color: #808080;
      font-size: 10pt;
    }
    .answer {
      text-decoration: underline;
      padding-left: 1em;
    }
    table {
      text-align: right;
    }
    table tr td.digits {
      width: 2em;
    }
    @media print{@page {size: landscape}}
  </style>
</head>
<body class="gradient-bg">
<div id="page">
  <div id="content"></div>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script language="JavaScript">
    const arrayToTable = function ($, data, options) {
      "use strict";
      const outerDiv = $('<div />').addClass('columns');
      const list = $('<ul />');
      for (let i = 0; i < data.length; i++) {
        let listItem = $('<li />');
        let table = $('<table />'),
          defaults = {
            attrs: {} // attributes for the table element, can be used to
          };
        options = $.extend(defaults, options);
        table.attr(options.attrs);
        let row = $('<tr />');
        if(data[i][0] !== '') {
          row.append($('<td />').addClass('serial-no').addClass('digits').html((i + 1) + '.'));
          for (let j = 0; j < data[i].length; j++) {
            row.append($('<td />').addClass('digits').html(data[i][j]));
          }
          row.append($('<td />').addClass('answer').html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'));
          row.append($('<td />').html('&nbsp;&nbsp;'));
        }
        table.append(row);
        listItem.append(table);
        list.append(listItem);
      }
      outerDiv.append(list);
      return outerDiv;
    };
    const generate = function (max1, max2, op, num) {
      const data = [];
      for (let i = 0; i < num; i++) {
        let row = [];
        let num1 = parseInt(Math.random() * (max1 + 1));
        let num2 = parseInt(Math.random() * (max2 + 1));
        row.push(String(op !== '-' ? num1 : Math.max(num1, num2)).padStart(2, ' '));
        row.push(op);
        row.push(String(op !== '-' ? num2 : Math.min(num1, num2)).padStart(2, ' '));
        row.push('=');
        data.push(row);
      }
      return data;
    };
    const shuffle = function (ar) {
      for(let i = ar.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * i);
        const temp = ar[i];
        ar[i] = ar[j];
        ar[j] = temp;
      }
      return ar;
    };
    function populateTable($) {
      const maxAddition1 = 20;
      const maxAddition2 = 20;
      const numAdditions = 20;
      const maxSubtraction1 = 20;
      const maxSubtraction2 = 20;
      const numSubtractions = 10;
      const maxMultiplication1 = 7;
      const maxMultiplication2 = 10;
      const numMultiplications = 10;

      const data = [];
      data.push(...generate(maxAddition1, maxAddition2,'+', numAdditions))
      data.push(...generate(maxSubtraction1, maxSubtraction2,'-', numSubtractions))
      data.push(...generate(maxMultiplication1, maxMultiplication2,'X', numMultiplications))

      const table = arrayToTable($, shuffle(data), {
        attrs: {class: 'table'}
      })
      $('#content').append(table);
    }
    function initSlider($) {
      populateTable($);
    }
    $(document).ready(function(){
      initSlider($);
    });
  </script>
</div>
</body>
</html>
